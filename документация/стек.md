# Стек и структура проекта «ВашЭлектроМагазин»

## Технологический стек

- Язык программирования: Rust (все микросервисы)
- Фронтенд: TypeScript (React — опционально)
- База данных: PostgreSQL (основная), Redis (кэш)
- Брокер сообщений: RabbitMQ
- Оркестрация: Docker Compose, Kubernetes (опционально для прототипа)
- Мониторинг: Prometheus, Grafana (опционально для прототипа)
- Логирование: ELK (Elasticsearch, Logstash, Kibana) (опционально для прототипа)

## Архитектура

- Микросервисная архитектура
- Каждый сервис реализован по паттерну DDD (Domain-Driven Design):
  - domain/ — доменные модели и бизнес-логика
  - application/ — сценарии использования (use cases)
  - infrastructure/ — работа с БД, интеграции, внешние сервисы
  - interfaces/ — контроллеры, API, внешние интерфейсы
  - main.rs — точка входа
  - Cargo.toml — зависимости

## Микросервисы

1. core — ядро и критические сервисы
2. catalog-service — каталог товаров
3. cart-service — корзина
4. order-service — заказы
5. user-service — пользователи
6. promo-service — промокоды и скидки
7. delivery-service — доставка
8. payment-service — оплата
9. notification-service — уведомления
10. frontends — набор микро‑фронтендов

## Фронтенд

- Подход: микро-фронтенды на TypeScript/для React опционально, сборка Vite/webpack, интеграция через API Gateway.
- Приложения:
  - frontends/core-admin-ui — админ и общие панели
  - frontends/catalog-ui — каталог и карточка товара
  - frontends/cart-ui — корзина
  - frontends/order-ui — оформление и управление заказами
  - frontends/user-ui — аккаунт и профиль
  - frontends/promo-ui — акции и купоны
  - frontends/delivery-ui — доставка и трекинг
  - frontends/payment-ui — платежи
  - frontends/notification-ui — настройки уведомлений


## Дополнительные инструменты и компоненты

- shared-libraries — общие библиотеки и утилиты (common-dto, common-security, common-utils)
- frontend — клиентская часть (TypeScript, React — опционально)
- infrastructure — конфигурация PostgreSQL, Redis, RabbitMQ, Docker Compose, Kubernetes, мониторинг, логирование
- scripts — скрипты автоматизации (сборка, деплой, тесты)
- docs — документация (API, архитектура, развертывание, разработка)
- tests — тесты (backend, frontend, интеграционные)

## Краткое описание

Проект «ВашЭлектроМагазин» строится на Rust с использованием микросервисной архитектуры и DDD. Каждый сервис изолирован, легко масштабируется и поддерживается. Для коммуникации между сервисами используется RabbitMQ, для хранения данных — PostgreSQL и Redis. Вся инфраструктура автоматизируется через Docker и Kubernetes (опционаольно), мониторинг и логирование реализованы с помощью Prometheus, Grafana и ELK (лпционально).

Фронтенд реализован на TypeScript (React — опционально) и взаимодействует с микросервисами через API.


---

## Требования и правила для построения архитектуры на языке ArchiMate

В проекте «ВашЭлектроМагазин» архитектура будет строиться по трёхслойной модели ArchiMate:

- **Бизнес-слой (Business Layer):**
 - Описывает бизнес-процессы, роли, объекты, взаимодействие между участниками (покупатель, администратор, заказ, корзина, каталог товаров, промокод, доставка, оплата, уведомление).
  - Важно явно выделять бизнес-объекты и процессы, их связи и потоки информации.

- **Прикладной слой (Application Layer):**
  - Включает микросервисы, API Gateway, фронтенд, общие библиотеки, сценарии взаимодействия между приложениями.
  - Необходимо показать, как бизнес-процессы реализуются через приложения и сервисы, какие интерфейсы и API используются.

- **Технологический слой (Technology Layer):**
  - Описывает инфраструктуру: языки, базы данных, брокеры сообщений, серверы, средства оркестрации, мониторинга и логирования.
  - Важно отразить, на чём развёрнуты сервисы, какие технологии обеспечивают работу приложений.

### Обязательные элементы для ArchiMate-диаграммы:
- Сущности и их краткое описание для каждого слоя
- Связи между слоями (например, какой сервис реализует бизнес-процесс, через какой API происходит взаимодействие)
- Внешние участники (пользователь, интеграции)

### Опциональные и дополнительные элементы (помечать как «опционально»):
- Оркестрация (Docker Compose, Kubernetes)
- Мониторинг (Prometheus, Grafana)
- Логирование (ELK)
- Использование React во фронтенде
- Интеграция с внешними сервисами (если не критично для прототипа)

### Рекомендации:
- Соблюдать строгую иерархию слоёв: бизнес → прикладной → технологический
- Не смешивать элементы разных слоёв на одной диаграмме
- Для каждого бизнес-процесса указывать, каким приложением/сервисом он реализуется и на какой технологии развёрнут
- Все опциональные элементы выделять в легенде или комментариях

Это описание поможет корректно и полноценно построить архитектуру проекта «ЭлектроМаркет» на языке ArchiMate.