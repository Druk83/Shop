# Файловая структура проекта (Rust microservices, DDD)

```
shop_platform/                         # Корневая директория платформы
├── api_gateway/                       # API GATEWAY СЕРВИС (Rust)
│   ├── src/
│   │   ├── config/                    # Конфигурация gateway
│   │   │   ├── mod.rs                 # Модуль конфигурации
│   │   │   ├── gateway_config.rs      # Маршрутизация и таргеты сервисов
│   │   │   ├── security_config.rs     # Безопасность (JWT/ключи)
│   │   │   └── cors_config.rs         # CORS настройки
│   │   ├── middleware/                # Middleware компоненты
│   │   │   ├── mod.rs                 # Модуль middleware
│   │   │   ├── auth_middleware.rs     # Аутентификация/авторизация
│   │   │   ├── logging_middleware.rs  # Логирование запросов
│   │   │   └── rate_limit_middleware.rs # Ограничение скорости
│   │   ├── handlers/                  # HTTP обработчики
│   │   │   ├── mod.rs                 # Модуль обработчиков
│   │   │   ├── health_handler.rs      # Health check
│   │   │   └── proxy_handler.rs       # Прокси до сервисов
│   │   ├── utils/                     # Утилиты
│   │   │   ├── mod.rs                 # Модуль утилит
│   │   │   ├── service_discovery.rs   # Service discovery утилиты
│   │   │   └── load_balancer.rs       # Балансировка (round-robin и т.п.)
│   │   ├── error.rs                   # Обработка ошибок
│   │   ├── lib.rs                     # Библиотечный крейт
│   │   └── main.rs                    # Главный файл приложения
│   ├── config/                        # Конфигурационные файлы
│   │   ├── default.toml               # Конфигурация по умолчанию
│   │   ├── development.toml           # Конфигурация для разработки
│   │   └── production.toml            # Конфигурация для production
│   └── Cargo.toml                     # Cargo конфигурация
├── service_discovery/                 # SERVICE DISCOVERY (Rust)
│   ├── src/
│   │   ├── config/
│   │   │   ├── mod.rs
│   │   │   └── discovery_config.rs
│   │   ├── handlers/
│   │   │   ├── mod.rs
│   │   │   ├── registry_handler.rs
│   │   │   └── discovery_handler.rs
│   │   ├── services/
│   │   │   ├── mod.rs
│   │   │   ├── registry_service.rs
│   │   │   └── health_check_service.rs
│   │   ├── models/
│   │   │   ├── mod.rs
│   │   │   ├── service_info.rs
│   │   │   └── health_status.rs
│   │   ├── lib.rs
│   │   └── main.rs
│   ├── config/default.toml
│   └── Cargo.toml
├── config_server/                     # CONFIGURATION SERVER (Rust)
│   ├── src/
│   │   ├── config/{ mod.rs, config_server_config.rs }
│   │   ├── handlers/{ mod.rs, config_handler.rs }
│   │   ├── services/{ mod.rs, config_service.rs, vault_service.rs }
│   │   ├── models/{ mod.rs, config_item.rs, secret_item.rs }
│   │   ├── lib.rs
│   │   └── main.rs
│   ├── configs/{ user_service/, catalog_service/, order_service/ }
│   └── Cargo.toml
├── core_service/                      # МИКРОСЕРВИС CORE (ядро доменной логики)
│   ├── src/
│   │   ├── handlers/{ mod.rs, health_handler.rs }
│   │   ├── services/{ mod.rs, domain_rules_service.rs }
│   │   ├── models/{ mod.rs, id.rs, money.rs }
│   │   ├── dto/{ mod.rs }
│   │   ├── repositories/{ mod.rs }
│   │   ├── config/{ mod.rs, settings.rs }
│   │   ├── error.rs
│   │   ├── lib.rs
│   │   └── main.rs
│   ├── config/settings.toml
│   └── Cargo.toml
├── catalog_service/                   # МИКРОСЕРВИС КАТАЛОГА (товары/категории/склад)
│   ├── src/
│   │   ├── handlers/{ mod.rs, product_handler.rs, category_handler.rs, inventory_handler.rs }
│   │   ├── services/{ mod.rs, product_service.rs, category_service.rs, inventory_service.rs }
│   │   ├── models/{ mod.rs, product.rs, category.rs, inventory.rs }
│   │   ├── dto/{ mod.rs, product_dto.rs, category_dto.rs, inventory_dto.rs }
│   │   ├── repositories/{ mod.rs, product_repository.rs, category_repository.rs, inventory_repository.rs }
│   │   ├── middleware/{ mod.rs, cache_middleware.rs, validation_middleware.rs }
│   │   ├── config/{ mod.rs, database_config.rs, cache_config.rs }
│   │   ├── error.rs
│   │   ├── lib.rs
│   │   └── main.rs
│   ├── migrations/
│   │   ├── 2025-01-01-000001_create_categories/{ up.sql, down.sql }
│   │   ├── 2025-01-01-000002_create_products/{ up.sql, down.sql }
│   │   └── 2025-01-01-000003_create_inventory/{ up.sql, down.sql }
│   ├── config/settings.toml
│   └── Cargo.toml
├── cart_service/                      # МИКРОСЕРВИС КОРЗИНЫ
│   ├── src/
│   │   ├── handlers/{ mod.rs, cart_handler.rs, item_handler.rs }
│   │   ├── services/{ mod.rs, cart_service.rs }
│   │   ├── models/{ mod.rs, cart.rs, cart_item.rs }
│   │   ├── dto/{ mod.rs, cart_dto.rs, item_dto.rs }
│   │   ├── repositories/{ mod.rs, cart_repository.rs }
│   │   ├── middleware/{ mod.rs, validation_middleware.rs }
│   │   ├── config/{ mod.rs, database_config.rs, cache_config.rs }
│   │   ├── error.rs
│   │   ├── lib.rs
│   │   └── main.rs
│   ├── migrations/{ 2025-01-01-000001_create_carts/{ up.sql, down.sql } }
│   ├── config/settings.toml
│   └── Cargo.toml
├── order_service/                     # МИКРОСЕРВИС ЗАКАЗОВ
│   ├── src/
│   │   ├── handlers/{ mod.rs, order_handler.rs, payment_handler.rs, shipping_handler.rs }
│   │   ├── services/{ mod.rs, order_service.rs, payment_service.rs, shipping_service.rs }
│   │   ├── models/{ mod.rs, order.rs, payment.rs, shipping.rs }
│   │   ├── dto/{ mod.rs, order_dto.rs, payment_dto.rs, shipping_dto.rs }
│   │   ├── clients/{ mod.rs, user_service_client.rs, catalog_service_client.rs }
│   │   ├── repositories/{ mod.rs, order_repository.rs, payment_repository.rs, shipping_repository.rs }
│   │   ├── config/{ mod.rs, database_config.rs, client_config.rs }
│   │   ├── error.rs
│   │   ├── lib.rs
│   │   └── main.rs
│   ├── migrations/
│   │   ├── 2025-01-01-000001_create_orders/{ up.sql, down.sql }
│   │   ├── 2025-01-01-000002_create_payments/{ up.sql, down.sql }
│   │   └── 2025-01-01-000003_create_shipping/{ up.sql, down.sql }
│   ├── config/settings.toml
│   └── Cargo.toml
├── user_service/                      # МИКРОСЕРВИС ПОЛЬЗОВАТЕЛЕЙ
│   ├── src/
│   │   ├── handlers/{ mod.rs, user_handler.rs, profile_handler.rs }
│   │   ├── services/{ mod.rs, user_service.rs, profile_service.rs }
│   │   ├── models/{ mod.rs, user.rs, profile.rs }
│   │   ├── dto/{ mod.rs, user_dto.rs, profile_dto.rs }
│   │   ├── repositories/{ mod.rs, user_repository.rs, profile_repository.rs }
│   │   ├── middleware/{ mod.rs, auth_middleware.rs, validation_middleware.rs }
│   │   ├── config/{ mod.rs, database_config.rs, security_config.rs }
│   │   ├── error.rs
│   │   ├── lib.rs
│   │   └── main.rs
│   ├── migrations/
│   │   ├── 2025-01-01-000001_create_users/{ up.sql, down.sql }
│   │   └── 2025-01-01-000002_create_profiles/{ up.sql, down.sql }
│   ├── config/settings.toml
│   └── Cargo.toml
├── promo_service/                     # МИКРОСЕРВИС ПРОМО (акции/скидки)
│   ├── src/
│   │   ├── handlers/{ mod.rs, promo_handler.rs, coupon_handler.rs }
│   │   ├── services/{ mod.rs, promo_service.rs, coupon_service.rs, rules_engine.rs }
│   │   ├── models/{ mod.rs, promo.rs, coupon.rs, rule.rs }
│   │   ├── dto/{ mod.rs, promo_dto.rs, coupon_dto.rs }
│   │   ├── repositories/{ mod.rs, promo_repository.rs, coupon_repository.rs }
│   │   ├── middleware/{ mod.rs, validation_middleware.rs }
│   │   ├── config/{ mod.rs, database_config.rs }
│   │   ├── error.rs
│   │   ├── lib.rs
│   │   └── main.rs
│   ├── migrations/{ 2025-01-01-000001_create_promos/{ up.sql, down.sql } }
│   ├── config/settings.toml
│   └── Cargo.toml
├── delivery_service/                  # МИКРОСЕРВИС ДОСТАВКИ
│   ├── src/
│   │   ├── handlers/{ mod.rs, shipping_rate_handler.rs, tracking_handler.rs }
│   │   ├── services/{ mod.rs, shipping_rate_service.rs, tracking_service.rs }
│   │   ├── models/{ mod.rs, shipment.rs, rate.rs, tracking.rs }
│   │   ├── dto/{ mod.rs, shipment_dto.rs, rate_dto.rs, tracking_dto.rs }
│   │   ├── clients/{ mod.rs, carrier_client.rs }
│   │   ├── repositories/{ mod.rs, shipment_repository.rs }
│   │   ├── config/{ mod.rs, database_config.rs, client_config.rs }
│   │   ├── error.rs
│   │   ├── lib.rs
│   │   └── main.rs
│   ├── migrations/{ 2025-01-01-000001_create_shipments/{ up.sql, down.sql } }
│   ├── config/settings.toml
│   └── Cargo.toml
├── payment_service/                   # МИКРОСЕРВИС ПЛАТЕЖЕЙ
│   ├── src/
│   │   ├── handlers/{ mod.rs, payment_handler.rs, gateway_handler.rs, transaction_handler.rs }
│   │   ├── services/{ mod.rs, payment_service.rs, gateway_service.rs, transaction_service.rs }
│   │   ├── models/{ mod.rs, payment.rs, gateway.rs, transaction.rs }
│   │   ├── dto/{ mod.rs, payment_dto.rs, gateway_dto.rs, transaction_dto.rs }
│   │   ├── gateways/{ mod.rs, stripe_gateway.rs, paypal_gateway.rs, bank_gateway.rs }
│   │   ├── repositories/{ mod.rs, payment_repository.rs, transaction_repository.rs }
│   │   ├── config/{ mod.rs, database_config.rs, gateway_config.rs }
│   │   ├── error.rs
│   │   ├── lib.rs
│   │   └── main.rs
│   ├── config/settings.toml
│   └── Cargo.toml
├── notification_service/              # МИКРОСЕРВИС УВЕДОМЛЕНИЙ
│   ├── src/
│   │   ├── handlers/{ mod.rs, email_handler.rs, sms_handler.rs, push_handler.rs }
│   │   ├── services/{ mod.rs, email_service.rs, sms_service.rs, push_service.rs }
│   │   ├── listeners/{ mod.rs, order_event_listener.rs, user_event_listener.rs }
│   │   ├── templates/{ mod.rs, email_templates.rs, sms_templates.rs }
│   │   ├── models/{ mod.rs, notification.rs, template.rs }
│   │   ├── config/{ mod.rs, messaging_config.rs, template_config.rs }
│   │   ├── error.rs
│   │   ├── lib.rs
│   │   └── main.rs
│   ├── templates/{ email/, push/ }
│   ├── config/settings.toml
│   └── Cargo.toml
├── shared_libraries/                  # ОБЩИЕ БИБЛИОТЕКИ (Rust crates)
│   ├── common_dto/
│   │   ├── src/{ lib.rs, base_dto.rs, error_dto.rs, page_dto.rs }
│   │   └── Cargo.toml
│   ├── common_security/
│   │   ├── src/{ lib.rs, jwt_token_provider.rs, security_utils.rs, auth_middleware.rs }
│   │   └── Cargo.toml
│   ├── common_utils/
│   │   ├── src/{ lib.rs, date_utils.rs, string_utils.rs, validation_utils.rs }
│   │   └── Cargo.toml
│   ├── common_errors/
│   │   ├── src/{ lib.rs, error_types.rs, error_handling.rs }
│   │   └── Cargo.toml
│   └── common_messaging/
│       ├── src/{ lib.rs, event_publisher.rs, event_subscriber.rs, message_broker.rs }
│       └── Cargo.toml
├── frontends/                         # МИКРО-ФРОНТЕНДЫ (TypeScript/ опционально для React)
│   ├── core-admin-ui/
│   │   ├── package.json
│   │   ├── tsconfig.json
│   │   ├── vite.config.ts
│   │   └── src/{ app/, features/, shared/, widgets/, pages/ }
│   ├── catalog-ui/
│   │   ├── package.json
│   │   ├── tsconfig.json
│   │   ├── vite.config.ts
│   │   └── src/{ app/, features/, shared/, widgets/, pages/ }
│   ├── cart-ui/
│   │   ├── package.json
│   │   ├── tsconfig.json
│   │   ├── vite.config.ts
│   │   └── src/{ app/, features/, shared/, widgets/, pages/ }
│   ├── order-ui/
│   │   ├── package.json
│   │   ├── tsconfig.json
│   │   ├── vite.config.ts
│   │   └── src/{ app/, features/, shared/, widgets/, pages/ }
│   ├── user-ui/
│   │   ├── package.json
│   │   ├── tsconfig.json
│   │   ├── vite.config.ts
│   │   └── src/{ app/, features/, shared/, widgets/, pages/ }
│   ├── promo-ui/
│   │   ├── package.json
│   │   ├── tsconfig.json
│   │   ├── vite.config.ts
│   │   └── src/{ app/, features/, shared/, widgets/, pages/ }
│   ├── delivery-ui/
│   │   ├── package.json
│   │   ├── tsconfig.json
│   │   ├── vite.config.ts
│   │   └── src/{ app/, features/, shared/, widgets/, pages/ }
│   ├── payment-ui/
│   │   ├── package.json
│   │   ├── tsconfig.json
│   │   ├── vite.config.ts
│   │   └── src/{ app/, features/, shared/, widgets/, pages/ }
│   └── notification-ui/
│       ├── package.json
│       ├── tsconfig.json
│       ├── vite.config.ts
│       └── src/{ app/, features/, shared/, widgets/, pages/ }
├── contracts/                         # КОНТРАКТЫ API/СОБЫТИЙ
│   ├── openapi/
│   │   ├── api-gateway.yaml
│   │   ├── core-service.yaml
│   │   ├── user-service.yaml
│   │   ├── catalog-service.yaml
│   │   ├── cart-service.yaml
│   │   ├── order-service.yaml
│   │   ├── promo-service.yaml
│   │   ├── delivery-service.yaml
│   │   └── payment-service.yaml
│   ├── asyncapi/
│   │   ├── order-events.yaml          # order_created, order_paid
│   │   ├── product-events.yaml        # stock_changed (каталог)
│   │   └── notification-events.yaml   # уведомления
│   └── schemas/
│       ├── user.json
│       ├── product.json
│       ├── cart.json
│       ├── order.json
│       ├── promo.json
│       └── delivery.json
├── infrastructure/                    # ИНФРАСТРУКТУРА
│   ├── docker-compose.yml             # Postgres, Redis, RabbitMQ, сервисы, Prometheus/Grafana, ELK
│   ├── kubernetes/
│   │   ├── namespaces/
│   │   ├── deployments/
│   │   ├── services/
│   │   ├── ingresses/
│   │   ├── configmaps/
│   │   └── secrets/
│   ├── monitoring/{ prometheus/, grafana/ }
│   ├── logging/{ elasticsearch/, logstash/, kibana/ }
│   └── helm/{ microservices-platform/, api-gateway/, monitoring/ }
├── scripts/                           # СКРИПТЫ АВТОМАТИЗАЦИИ
│   ├── build_all.sh
│   ├── deploy_local.sh
│   ├── deploy_staging.sh
│   ├── deploy_production.sh
│   ├── run_tests.sh
│   └── setup_environment.sh
├── docs/                              # ДОКУМЕНТАЦИЯ
│   ├── api/
│   ├── architecture/
│   ├── deployment/
│   └── development/
├── Cargo.toml                         # Root Cargo (workspace) — перечисляет все крейты
└── rust-toolchain.toml                # Версия Rust toolchain
```
